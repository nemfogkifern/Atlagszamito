export function setupThemeToggle() {
  const btn = document.createElement("button");
  btn.id = "themeToggle";
  btn.setAttribute("aria-label", "Toggle theme");
  btn.title = "Téma váltása (Sötét/Világos)";
  btn.style.position = "absolute";
  btn.style.top = "25px";
  btn.style.right = "10px";
  // btn.style.padding = "1px";
  btn.style.background = "transparent";
  btn.style.border = "none";
  btn.style.cursor = "pointer";
  btn.style.zIndex = "1000";
  // btn.style.color = "white";

  const sunSVG = `
    <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="30px" height="30px" viewBox="0,0,256,256">
<g fill="#ffffff" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><g transform="scale(5.12,5.12)"><path d="M24.98438,3.98633c-0.55152,0.00862 -0.99193,0.46214 -0.98437,1.01367v6c-0.0051,0.36064 0.18438,0.69608 0.49587,0.87789c0.3115,0.18181 0.69676,0.18181 1.00825,0c0.3115,-0.18181 0.50097,-0.51725 0.49587,-0.87789v-6c0.0037,-0.2703 -0.10218,-0.53059 -0.29351,-0.72155c-0.19133,-0.19097 -0.45182,-0.29634 -0.72212,-0.29212zM10.88867,9.89063c-0.40657,0.0009 -0.77213,0.24784 -0.92475,0.62467c-0.15262,0.37684 -0.06192,0.80856 0.22944,1.09212l4.19922,4.19922c0.25082,0.26123 0.62326,0.36645 0.9737,0.27509c0.35043,-0.09136 0.6241,-0.36502 0.71546,-0.71546c0.09136,-0.35043 -0.01386,-0.72288 -0.27509,-0.9737l-4.19922,-4.19922c-0.18874,-0.19402 -0.44807,-0.30325 -0.71875,-0.30273zM39.08008,9.89063c-0.2598,0.00774 -0.50638,0.11632 -0.6875,0.30273l-4.19922,4.19922c-0.26123,0.25082 -0.36645,0.62326 -0.27509,0.9737c0.09136,0.35043 0.36502,0.6241 0.71546,0.71546c0.35043,0.09136 0.72288,-0.01386 0.9737,-0.27509l4.19922,-4.19922c0.29576,-0.28749 0.38469,-0.72707 0.22393,-1.10691c-0.16075,-0.37985 -0.53821,-0.62204 -0.9505,-0.60988zM25,15c-0.14032,-0.0016 -0.2794,0.02635 -0.4082,0.08203c-5.33175,0.22555 -9.5918,4.52954 -9.5918,9.91797c0,5.53333 4.46667,10 10,10c5.53333,0 10,-4.46667 10,-10c0,-5.38776 -4.25902,-9.69142 -9.58984,-9.91797c-0.12941,-0.05595 -0.26918,-0.0839 -0.41016,-0.08203zM25,17c4.46667,0 8,3.53333 8,8c0,4.46667 -3.53333,8 -8,8c-4.46667,0 -8,-3.53333 -8,-8c0,-4.46667 3.53333,-8 8,-8zM5,24c-0.36064,-0.0051 -0.69608,0.18438 -0.87789,0.49587c-0.18181,0.3115 -0.18181,0.69676 0,1.00825c0.18181,0.3115 0.51725,0.50097 0.87789,0.49587h6c0.36064,0.0051 0.69608,-0.18438 0.87789,-0.49587c0.18181,-0.3115 0.18181,-0.69676 0,-1.00825c-0.18181,-0.3115 -0.51725,-0.50097 -0.87789,-0.49587zM39,24c-0.36064,-0.0051 -0.69608,0.18438 -0.87789,0.49587c-0.18181,0.3115 -0.18181,0.69676 0,1.00825c0.18181,0.3115 0.51725,0.50097 0.87789,0.49587h6c0.36064,0.0051 0.69608,-0.18438 0.87789,-0.49587c0.18181,-0.3115 0.18181,-0.69676 0,-1.00825c-0.18181,-0.3115 -0.51725,-0.50097 -0.87789,-0.49587zM15.08008,33.89063c-0.2598,0.00774 -0.50638,0.11632 -0.6875,0.30273l-4.19922,4.19922c-0.26123,0.25082 -0.36645,0.62326 -0.27509,0.9737c0.09136,0.35043 0.36502,0.6241 0.71546,0.71546c0.35043,0.09136 0.72288,-0.01386 0.9737,-0.27509l4.19922,-4.19922c0.29576,-0.28749 0.38469,-0.72707 0.22393,-1.10691c-0.16075,-0.37985 -0.53821,-0.62204 -0.9505,-0.60988zM34.88867,33.89063c-0.40657,0.0009 -0.77213,0.24784 -0.92475,0.62467c-0.15262,0.37684 -0.06192,0.80856 0.22944,1.09212l4.19922,4.19922c0.25082,0.26123 0.62326,0.36645 0.9737,0.27509c0.35043,-0.09136 0.6241,-0.36502 0.71546,-0.71546c0.09136,-0.35043 -0.01386,-0.72288 -0.27509,-0.9737l-4.19922,-4.19922c-0.18874,-0.19402 -0.44807,-0.30325 -0.71875,-0.30273zM24.98438,37.98633c-0.55152,0.00862 -0.99193,0.46214 -0.98437,1.01367v6c-0.0051,0.36064 0.18438,0.69608 0.49587,0.87789c0.3115,0.18181 0.69676,0.18181 1.00825,0c0.3115,-0.18181 0.50097,-0.51725 0.49587,-0.87789v-6c0.0037,-0.2703 -0.10218,-0.53059 -0.29351,-0.72155c-0.19133,-0.19097 -0.45182,-0.29634 -0.72212,-0.29212z"></path></g></g>
</svg>
  `;

  const moonSVG = `
    <svg xmlns="http://www.w3.org/2000/svg" height="30" width="30" fill="currentColor">
      <path d="M15.85 22q-3.25 0-5.637-2.388Q7.825 17.225 7.825 14q0-1.8.838-3.375Q9.5 9.05 11 8.1q.125-.075.213-.063.087.013.162.063.225.125.188.375-.075.625-.113 1.2-.037.575-.037 1.125 0 3.025 2.112 5.137Q15.625 18.15 18.65 18.15q.55 0 1.125-.037.575-.038 1.2-.113.25-.037.387.188.138.225.038.45-1.05 2.025-3.05 3.063Q17.35 22 15.85 22Z"/>
    </svg>
  `;

  const isDark = () => document.documentElement.getAttribute("data-theme") === "dark";

  function updateIcon() {
    btn.innerHTML = isDark() ? sunSVG : moonSVG;
  }

  btn.addEventListener("click", () => {
    if (isDark()) {
      document.documentElement.removeAttribute("data-theme");
      localStorage.setItem("theme", "light");
    } else {
      document.documentElement.setAttribute("data-theme", "dark");
      localStorage.setItem("theme", "dark");
    }
    updateIcon();
  });

  if (localStorage.getItem("theme") === "dark") {
    document.documentElement.setAttribute("data-theme", "dark");
  }

  updateIcon();
  document.body.appendChild(btn);
}